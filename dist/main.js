(()=>{"use strict";let e=document.querySelector("input[type=search]");const t=document.querySelector(".submit"),n=document.getElementById("content"),o=document.getElementById("city"),i=document.getElementById("sky"),c=document.getElementById("time"),r=document.getElementById("temp"),a=document.getElementById("speed"),d=document.getElementById("degree"),u=document.getElementById("direction"),s=document.getElementById("humidity"),l=document.querySelector("input[type=checkbox]"),y=document.getElementById("backgroundContainer"),m=document.getElementById("error-message");let g;async function p(e){try{const t=await fetch(`https://api.weatherapi.com/v1/current.json?key=604fbfb1a0ef42cba85103545232711&q=${e}`);g=await t.json(),o.textContent=`${g.location.name}, ${g.location.country}`,i.src="https:"+g.current.condition.icon,c.textContent=function(e,t,n){var o,i,c;return function(e,t){if(t.length<1)throw new TypeError("1 argument required, but only "+t.length+" present")}(0,arguments),void 0===(c=t)||"locale"in c?n=t:i=t,new Intl.DateTimeFormat(null===(o=n)||void 0===o?void 0:o.locale,i).format(e)}(new Date(g.location.localtime),{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"}),a.textContent=`Wind speed: ${g.current.wind_kph} kph`,d.textContent=`Wind degree: ${g.current.wind_degree}°`,u.textContent=`Wind direction: ${g.current.wind_dir}`,s.textContent=`Humidity: ${g.current.humidity}%`,m.textContent="",h(),function(){const e=g.current.condition.code,t=Object.entries({clear:[1e3],cloudy:[1003,1006,1009,1030,1063,1066,1069,1072,1087,1135,1150],rainy:[1153,1168,1171,1180,1183,1186,1189,1192,1195,1198,1201,1240,1243,1246,1273,1276],snowy:[1114,1117,1147,1204,1207,1210,1213,1216,1219,1222,1225,1237,1249,1252,1255,1258,1261,1264,1279,1282]}).find((([t,n])=>n.includes(e)));if(t)if(g.current.is_day){const[e,n]=t,o=`./images/${e}-day.jpg`;y.style.backgroundImage=`linear-gradient(0deg, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), url(${o})`}else{const[e,n]=t,o=`./images/${e}-night.jpg`;y.style.backgroundImage=`linear-gradient(0deg, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), url(${o})`}else y.style.backgroundImage="none"}(),function(){y.style.opacity=0,n.style.opacity=0;const e=()=>{y.removeEventListener("transitionend",e),y.style.transition="",n.style.transition="",y.style.opacity=1,n.style.opacity=1};y.addEventListener("transitionend",e),y.offsetHeight,n.offsetHeight,y.style.transition="opacity 0.5s",n.style.transition="opacity 0.5s",y.style.opacity=1,n.style.opacity=1}()}catch(e){e instanceof TypeError&&"Failed to fetch"===e.message?m.textContent="Network error. Please check your connection.":m.textContent="No matching location found"}}function h(){l.checked?r.textContent=`${g.current.temp_f} F°`:r.textContent=`${g.current.temp_c} C°`}t.addEventListener("click",(()=>{p(e.value)})),l.addEventListener("change",h),p("agadir")})();